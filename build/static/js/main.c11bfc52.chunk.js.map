{"version":3,"sources":["components/Checkout.jsx","App.jsx","index.js"],"names":["Checkout","serviceApiUrl","useState","orders","setOrders","services","setServices","cabins","setCabins","updateOrders","setUpdateOrders","selectedService","setSelectedService","selectedCabin","setSelectedCabin","selectedDate","setSelectedDate","fetchServices","a","axios","get","res","data","console","log","fetchCabins","method","url","withCredentials","fetchOrders","submitOrder","order","post","status","useEffect","className","htmlFor","value","name","id","onChange","e","target","length","map","s","c","type","onClick","alert","o","filteredCabins","filter","filteredServices","orderObjectToText","cabin","service","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c11bfc52.chunk.js","sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst Checkout = () => {\n    const serviceApiUrl = \"https://wom2.spionsatellit.com\"\n    const cabinApiUrl = \"https://wom1.spionsatellit.com/cabin\"\n\n    const [orders, setOrders] = useState([])\n    const [services, setServices] = useState([])\n    const [cabins, setCabins] = useState([])\n    const [updateOrders, setUpdateOrders] = useState(false)\n\n    const [selectedService, setSelectedService] = useState(\"\");\n    const [selectedCabin, setSelectedCabin] = useState(\"\");\n    const [selectedDate, setSelectedDate] = useState(\"\");\n\n    const orderObjectToText = (o) => {\n        const filteredCabins = cabins.filter(c => c[\"_id\"] === o[\"cabin_id\"]);\n        const filteredServices = services.filter(s => s[\"_id\"] === o[\"service_id\"]);\n\n        return [filteredCabins[0], filteredServices[0]];\n    }\n\n    const fetchServices = async () => {\n        try{\n            const res = await axios.get(`${serviceApiUrl}/service`);\n            setServices(res.data);\n        }catch (e) {\n            console.log(e);\n        }\n    }\n\n    const fetchCabins = async () => {\n        try{\n            // CORS fix i dev\n            const res = await axios({\n                method: \"GET\",\n                url: cabinApiUrl,\n                withCredentials: false\n            });\n            setCabins(res.data);\n        }catch (e) {\n            console.log(e);\n        }\n    }\n\n    const fetchOrders = async () => {\n        try{\n            const res = await axios.get(`${serviceApiUrl}/order`)\n\n            setOrders(res.data);\n        } catch (e){\n            console.log(e);\n        }\n    }\n\n    const submitOrder = async (order) => {\n        const res = await axios.post(`${serviceApiUrl}/order`,order);\n        console.log(res);\n        return res.status;\n    }\n\n    // Once\n    useEffect(() => {\n        // Hämta data\n        fetchServices();\n        fetchCabins();\n        fetchOrders();\n    },[])\n\n    // Vid submit \n    useEffect(() => {\n        fetchOrders();\n        setUpdateOrders(false);\n    }, [updateOrders])\n\n    return (\n        <div>\n            <div className=\"smaller-container\">\n                <h3>Beställ en tjänst</h3>\n                <label htmlFor=\"services\">Tjänst</label>\n                <select value={selectedService} name=\"services\" id=\"services\" onChange={(e) => {\n                    setSelectedService(e.target.value);\n                }}>\n                    <option>Välj en tjänst</option>\n                    { services.length > 0 &&\n                        services.map(s => {\n                            return <option key={s[\"_id\"]} value={s[\"_id\"]}>{s[\"service_name\"]}</option>\n                        })\n                    }\n                </select>\n                <label htmlFor=\"cabins\">Stuga</label>\n                <select value={selectedCabin} name=\"cabins\"  id=\"cabins\" onChange={(e) => {\n                    setSelectedCabin(e.target.value);\n                }}>\n                    <option>Välj en stuga</option>\n                    { cabins.length > 0 &&\n                        cabins.map(c => {\n                            return <option key={c[\"_id\"]} value={c[\"_id\"]}>{c[\"address\"]}</option>\n                        })\n                    }\n                </select>\n                <label htmlFor=\"date\">När?</label>\n                <input type=\"date\" id=\"date\" onChange={(e) => {\n                    setSelectedDate(e.target.value);\n                }}/>\n                <button onClick={() => {\n                    if(selectedService !== \"\" && selectedCabin !== \"\" && selectedDate !== \"\"){\n                        submitOrder({\n                            \"service_id\": selectedService,\n                            \"cabin_id\": selectedCabin,\n                            \"date\": selectedDate\n                        })\n\n                        setUpdateOrders(true);\n                    }else{\n                        alert(\"Ajj ajj, fyll i allt!\");\n                    }\n                }}>Beställ!</button>\n            </div>\n            <div className=\"smaller-container\">\n                <h3>Beställda tjänster</h3>\n                <ul>\n                    { orders.length > 0 &&\n                        orders.map(o => {\n                            const [cabin, service] = orderObjectToText(o);\n                            if(cabin && service){\n                                return (\n                                    <li key={o[\"_id\"]} >\n                                        <p><b>Stuga:</b> {\n                                            cabin[\"address\"]    \n                                        }</p>\n                                        <p><b>Tjänst:</b> {\n                                            service[\"service_name\"]\n                                        }</p>\n                                        <p><b>Datum:</b>{\n                                            o[\"date\"]\n                                        }</p>\n                                        <p><b>Pris:</b>{\n                                            service[\"price\"]\n                                        }<b>€</b></p>\n                                    </li>\n                                )\n                            }\n                        })\n                    }\n                </ul>\n            </div>\n        </div>\n    )\n}\n\nexport default Checkout;","import './App.css';\nimport Checkout from \"./components/Checkout\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <h1>Stugservice</h1>\n      <Checkout />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}